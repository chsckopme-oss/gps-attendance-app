<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPS Attendance System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 20px;
        }
        
        .card {
            background-color: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .employee-info {
            border-left: 4px solid #3498db;
        }
        
        .camera-selection {
            border-left: 4px solid #e74c3c;
        }
        
        .location-verification {
            border-left: 4px solid #2ecc71;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        select, input[type="text"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 10px;
        }
        
        .camera-option {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .camera-option input {
            margin-right: 10px;
        }
        
        .status {
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .status.acquiring {
            background-color: #fff9e6;
            color: #e67e22;
        }
        
        .status.success {
            background-color: #e8f8ef;
            color: #27ae60;
        }
        
        .status.error {
            background-color: #fdecea;
            color: #e74c3c;
        }
        
        .location-data {
            background-color: #f9f9f9;
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 10px;
        }
        
        .location-data p {
            margin-bottom: 5px;
        }
        
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        button:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
        }
        
        .accuracy-toggle {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }
        
        .toggle-option {
            flex: 1;
            text-align: center;
            padding: 8px;
            background-color: #ecf0f1;
            cursor: pointer;
        }
        
        .toggle-option.active {
            background-color: #3498db;
            color: white;
        }
        
        .toggle-option:first-child {
            border-radius: 4px 0 0 4px;
        }
        
        .toggle-option:last-child {
            border-radius: 0 4px 4px 0;
        }
        
        .hidden {
            display: none;
        }
        
        .attendance-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .attendance-actions button {
            flex: 1;
        }
        
        .check-in {
            background-color: #2ecc71;
        }
        
        .check-in:hover {
            background-color: #27ae60;
        }
        
        .check-out {
            background-color: #e74c3c;
        }
        
        .check-out:hover {
            background-color: #c0392b;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>GPS Attendance System</h1>
        
        <div class="card employee-info">
            <label for="employee-id">Employee ID:</label>
            <input type="text" id="employee-id" value="EMP001" readonly>
            
            <label for="department">Department:</label>
            <select id="department">
                <option value="">Select Department</option>
                <option value="hr">Human Resources</option>
                <option value="it">Information Technology</option>
                <option value="finance">Finance</option>
                <option value="marketing">Marketing</option>
                <option value="operations">Operations</option>
            </select>
        </div>
        
        <div class="card camera-selection">
            <p>Camera Selection:</p>
            <div class="camera-option">
                <input type="radio" id="front-camera" name="camera" value="front">
                <label for="front-camera">Front Camera</label>
            </div>
            <div class="camera-option">
                <input type="radio" id="rear-camera" name="camera" value="rear" checked>
                <label for="rear-camera">Rear Camera</label>
            </div>
        </div>
        
        <div class="card location-verification">
            <h3>Location Verification</h3>
            
            <div id="location-status" class="status acquiring">
                Acquiring location...
            </div>
            
            <div class="location-data">
                <p><strong>Time:</strong> <span id="location-time">--</span></p>
                <p><strong>Coordinates:</strong> <span id="location-coords">--</span></p>
                <p><strong>Address:</strong> <span id="location-address">--</span></p>
            </div>
            
            <button id="get-location-btn">Get Location</button>
            
            <div class="accuracy-toggle">
                <div class="toggle-option" id="low-accuracy">Low Accuracy</div>
                <div class="toggle-option active" id="high-accuracy">High Accuracy</div>
            </div>
        </div>
        
        <div class="attendance-actions">
            <button id="check-in-btn" class="check-in" disabled>Check In</button>
            <button id="check-out-btn" class="check-out" disabled>Check Out</button>
        </div>
        
        <div id="success-message" class="status success hidden">
            Attendance recorded successfully!
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const locationStatus = document.getElementById('location-status');
            const locationTime = document.getElementById('location-time');
            const locationCoords = document.getElementById('location-coords');
            const locationAddress = document.getElementById('location-address');
            const getLocationBtn = document.getElementById('get-location-btn');
            const lowAccuracyBtn = document.getElementById('low-accuracy');
            const highAccuracyBtn = document.getElementById('high-accuracy');
            const checkInBtn = document.getElementById('check-in-btn');
            const checkOutBtn = document.getElementById('check-out-btn');
            const successMessage = document.getElementById('success-message');
            
            // Variables
            let currentLocation = null;
            let highAccuracyMode = true;
            
            // Initialize
            updateDateTime();
            getLocation();
            
            // Event Listeners
            getLocationBtn.addEventListener('click', getLocation);
            
            lowAccuracyBtn.addEventListener('click', function() {
                highAccuracyMode = false;
                lowAccuracyBtn.classList.add('active');
                highAccuracyBtn.classList.remove('active');
                getLocation();
            });
            
            highAccuracyBtn.addEventListener('click', function() {
                highAccuracyMode = true;
                highAccuracyBtn.classList.add('active');
                lowAccuracyBtn.classList.remove('active');
                getLocation();
            });
            
            checkInBtn.addEventListener('click', function() {
                recordAttendance('check-in');
            });
            
            checkOutBtn.addEventListener('click', function() {
                recordAttendance('check-out');
            });
            
            // Functions
            function updateDateTime() {
                const now = new Date();
                locationTime.textContent = now.toLocaleString();
            }
            
            function getLocation() {
                locationStatus.textContent = 'Acquiring location...';
                locationStatus.className = 'status acquiring';
                locationCoords.textContent = '--';
                locationAddress.textContent = '--';
                
                if (!navigator.geolocation) {
                    locationStatus.textContent = 'Geolocation is not supported by this browser.';
                    locationStatus.className = 'status error';
                    return;
                }
                
                const options = {
                    enableHighAccuracy: highAccuracyMode,
                    timeout: 10000,
                    maximumAge: 0
                };
                
                navigator.geolocation.getCurrentPosition(
                    // Success callback
                    function(position) {
                        currentLocation = position;
                        const latitude = position.coords.latitude;
                        const longitude = position.coords.longitude;
                        
                        locationStatus.textContent = 'Location acquired successfully!';
                        locationStatus.className = 'status success';
                        locationCoords.textContent = `${latitude.toFixed(6)}, ${longitude.toFixed(6)}`;
                        
                        updateDateTime();
                        getAddressFromCoords(latitude, longitude);
                        
                        // Enable attendance buttons
                        checkInBtn.disabled = false;
                        checkOutBtn.disabled = false;
                    },
                    // Error callback
                    function(error) {
                        let errorMessage = 'Unknown error occurred.';
                        
                        switch(error.code) {
                            case error.PERMISSION_DENIED:
                                errorMessage = 'Location access denied by user.';
                                break;
                            case error.POSITION_UNAVAILABLE:
                                errorMessage = 'Location information is unavailable.';
                                break;
                            case error.TIMEOUT:
                                errorMessage = 'Location request timed out.';
                                break;
                        }
                        
                        locationStatus.textContent = errorMessage;
                        locationStatus.className = 'status error';
                        
                        // For demo purposes, simulate successful location acquisition
                        simulateLocation();
                    },
                    options
                );
            }
            
            function getAddressFromCoords(lat, lng) {
                // In a real app, you would use a reverse geocoding service
                // For demo purposes, we'll simulate an address lookup
                setTimeout(() => {
                    const addresses = [
                        "123 Office Street, Business District, City, 10001",
                        "456 Corporate Avenue, Downtown, City, 10002",
                        "789 Work Plaza, Commercial Area, City, 10003"
                    ];
                    
                    const randomAddress = addresses[Math.floor(Math.random() * addresses.length)];
                    locationAddress.textContent = randomAddress;
                }, 1500);
            }
            
            function simulateLocation() {
                // For demo purposes when geolocation fails
                setTimeout(() => {
                    const latitude = (Math.random() * 0.02) + 40.75; // Around NYC
                    const longitude = (Math.random() * 0.02) - 73.99; // Around NYC
                    
                    locationStatus.textContent = 'Location acquired successfully!';
                    locationStatus.className = 'status success';
                    locationCoords.textContent = `${latitude.toFixed(6)}, ${longitude.toFixed(6)}`;
                    
                    updateDateTime();
                    getAddressFromCoords(latitude, longitude);
                    
                    // Enable attendance buttons
                    checkInBtn.disabled = false;
                    checkOutBtn.disabled = false;
                }, 2000);
            }
            
            function recordAttendance(type) {
                if (!currentLocation) {
                    alert('Please acquire location first.');
                    return;
                }
                
                const department = document.getElementById('department').value;
                if (!department) {
                    alert('Please select your department.');
                    return;
                }
                
                // In a real app, you would send this data to a server
                console.log(`Attendance ${type} recorded:`, {
                    employeeId: document.getElementById('employee-id').value,
                    department: department,
                    location: {
                        coordinates: currentLocation.coords,
                        address: locationAddress.textContent
                    },
                    timestamp: new Date().toISOString()
                });
                
                // Show success message
                successMessage.textContent = `${type === 'check-in' ? 'Check-in' : 'Check-out'} recorded successfully!`;
                successMessage.classList.remove('hidden');
                
                // Hide success message after 3 seconds
                setTimeout(() => {
                    successMessage.classList.add('hidden');
                }, 3000);
            }
        });
    </script>
</body>
</html>
